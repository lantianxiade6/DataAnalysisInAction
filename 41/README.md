## 问题

比特币走势预测 那个方法比较好呢
  - 分类
  - 聚类
  - 回归
  - 关联分析

## 时间序列分析算法
时间序列可以理解为按照时间顺序组成的数字序列
时间序列分析模型建立了观察结果与时间变化的关系  
可以帮助我们预测未来一段时间内的结果变化

## 时间序列和回归分析有哪些区别

1. 确定结果和变量之间的关系
2. 时间序列分析得到的是目标变量 `y` 与时间的相关性
3. 回归分析训练得到的是目标变量y 与 字段量 x( >=1 个) 的关联性  

4. 回归擅长的是多变量和目标结果之间的分析
5. 时间序列分析建立在时间变化的基础上，它会分析目标变量的
    - 趋势
    - 周期
    - 时期
    - 不稳定因素


## 掌握

1. 概念
2. ARMA模型工具
3. 比特币历史数据时间序列建模并预测未来6个月的走势

经典模型

  - AR(Auto Regressive，自回归模型)，它认为过去若干时刻的点通过线性组合，再加上白噪声，即可预测未来某个时刻的点
  - MA(Moving Average，滑动平均模型)
  - ARMA(Auto Regressive Moving Average，自回归滑动平均模型)
  - ARIMA(Auto Regressive Integrated Moving Average，差分自回归滑动平均模型，也叫求和自回归滑动平均模型)


白噪声
  - 一个期望值为 `0` 方差为常数的纯随机过程

### 概念分类

- `AR` 模型还存在一个阶数，称为 `AR（p`）模型, `p` 阶自回归模型。它通过指定时刻点的前 p 个点，通过线性组合加上白噪声来预测当前时刻点的值

- `  MA` 滑动平均模型，`AR`模型是历史时序值的线性组合， `MA`是通过历史白噪声进行线性组合来影响当前时刻点。`AR`模型中的历史白噪声是通过影响历史时序值，从而间接影响到当前时刻点的预测值。`MA`模型也存在一个阶数，称为`MA(q)`模型，也叫做q阶移动平均模型。

- ` ARMA` 是 `AR` 模型和 `MA` 模型的混合，同样 `ARMA` 模型存在 `p` 和 `q` 两个阶数，称为 `ARMA(p,q)` 模型

- `ARIMA` ：相比于 `ARMA`，`ARIMA `多了一个差分的过程，作用是对不平稳数据进行差分平稳，在差分平稳后再进行建模

- `ARIMA` 是一个三元组的阶数 `(p,d,q)`，称为`ARIMA(p,d,q)` 模型，其中 `d` 是差分阶数


引入

```python
from statsmodels.tsa.arima_model import ARMA
ARMA(endog,order,exdog=None)#如ARMA(data,(7,0))
```
- endog代表内生变量，又叫非政策性变量，它是由模型决定的，不被政策左右，可以说是我们想要分析的变量，或者说是我们这次项目中需要用到的变量。
- order代表p和q的值，也就是ARMA的阶数
- exog代表外生变量，又叫政策性变量，在模型中受外部因素的影响，不是我们模型想要研究的变量。

代码实例

1. [测试](demo1.py)

2. 结果对比

![](WX20190318-122721.png)
预测走势
![](WX20190318-122744.png)

```python
AIC: 1619.6323
```

3. [比特币走势预测](bitcoin_analysis.py)  
字段 

![](字段.png)

流程

![](流程.jpg)

数据按月压缩

```python
df_month = df.resample('M').mean()
```

## 代码实例

比特币金额

![](pic1.png)
打印日志

```python
最优模型:                                ARMA Model Results
==============================================================================
Dep. Variable:         Weighted_Price   No. Observations:                   83
Model:                     ARMA(1, 1)   Log Likelihood                -688.761
Method:                       css-mle   S.D. of innovations            957.761
Date:                Mon, 18 Mar 2019   AIC                           1385.523
Time:                        12:35:34   BIC                           1395.198
Sample:                    12-31-2011   HQIC                          1389.410
                         - 10-31-2018
========================================================================================
                           coef    std err          z      P>|z|      [0.025      0.975]
----------------------------------------------------------------------------------------
const                 2133.3881   1571.958      1.357      0.179    -947.592    5214.368
ar.L1.Weighted_Price     0.9252      0.042     22.031      0.000       0.843       1.008
ma.L1.Weighted_Price     0.2680      0.116      2.310      0.023       0.041       0.495
                                    Roots
=============================================================================
                  Real          Imaginary           Modulus         Frequency
-----------------------------------------------------------------------------
AR.1            1.0808           +0.0000j            1.0808            0.0000
MA.1           -3.7313           +0.0000j            3.7313            0.5000
```
实际金额 预测金额
![](pic2.png)
[练习](practice.py)  
## 总结

![](总结.png)
