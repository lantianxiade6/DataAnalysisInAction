# 第一部分：泛型编程（1-3章）
## 一个良好的泛型编程需要解决如下几个泛型编程的问题：
1. 算法的泛型
2. 类型的泛型
3. 数据结构的泛型

## 类型系统
类型系统定义如何将编程语言中是数值和表达式归类为许多不同的类型，以及如何操作这些类型，还有这些类型如何相互作用。  
一般来说，编程语言会有两种类型。一种是内建类型，如int,float和char等。一种是抽象类型，如strut,class和function等。  
程序语言的类型系统主要提供如下功能：
1. 程序语言的安全性
2. 利于编译器的优化
3. 代码的可读性
4. 抽象化

### 静态类型语言
1. 如C、C++、Java
2. 静态类型检查是在编译器进行语义分析时进行的。如果一个语言强制实行类型规则（即通常只允许不丢失信息为前提的自动类型转换），那么称此处理为强类型，反之称为弱类型。
3. 优点：可以较早发现错误，还可增进运行时期的性能
### 动态类型语言
1. 如Python、PHP、JavaScript
2. 动态类型检查系统更多的是在运行时期做动态类型标记和相关检查。
3. 优点：分析代码更为简单，减少出错机会，更轻松快速地编写程序。通常不需要手动宣告类型。

## 泛型的本质
要了解泛型的本质，就需要了解类型的本质：
- 类型是对内存的一种抽象。不同的类型，会有不同的内存布局和内存分配的策略。
- 不同的类型，有不同的操作。  

所以要做到泛型，我们需要：
- 标准化掉类型的内存分配、释放和访问
- 标准化掉类型的操作。比如：比较操作，I/O操作，复制操作等等
- 标准化掉数据容器的操作。比如：查找操作、过滤操作、聚合算法等等
- 标准化掉类型上特有的操作。需要有标准化的接口来回调不同类型的具体操作。  

C语言偏向于让程序员可以控制更多的底层细节。  
而Java和Python则让程序员更多地关注业务功能的实现。  
而C++则是两者都想要，导致语言在设计上非常复杂。

## C语言
特点：  
1. C语言是一个静态弱类编程，在使用变量时需要声明变量类型，但是类似间可以有隐式转换。
2. 不同的变量类型可以用结构体（struct）组合在一起，以此来声明新的数据类型。
3. C语言可以有typedef关键词来定义类型的别名，以此来得到变量类型的抽象。
4. C语言是一个有结构化程序设计、具有变量作用域以及递归功能的过程式语言。
5. C语言传递参数一般是以值传递，也可以传递指针。
6. 通过指针，C语言可以容易地对内存进行低级控制，然而这加大了编程复杂度。
7. 编译预处理让C语言的编译更具有弹性，比如跨平台。  

C语言的这些特性，可以让程序员在微观层面写出非常精确的编程操作，也可以在底层和系统细节上非常自由、灵活和精确地控制代码。然而这些特性在代码组织和功能上并不美妙。  
C语言设计目标是提供一种能以简易的方式编译、处理低层内存、产生少量的机器码以及不需要任何运行环境支持便能运行的编程语言。C语言也很适合搭配汇编语言来使用。C语言把非常底层的控制权交给了程序员，保持语言最小和最简的特性，保证C语言的最快运行速度，那怕牺牲移植性。 

## C++
C++有效解决了程序泛型问题。  
1. 它通过类的方式来解决：类里面会有构造函数、析构函数表示这个类的分配和释放；还有它的拷贝构造函数，代表了对内存的复制；还有重载操作符。这样可以让一个用户自定义的数据类型和内建的那些数据类型很一致了。
2. 通过模板达到类型和算法的妥协。
3. 通过虚函数和运行时类型识别：虚函数带来的多态在语义上可以支持“同一类”的类型泛型。运行时类型识别技术可以做到在泛型时对具体类型的特殊处理。

- 使用模板技术来抽象类型，这样可以写出类型无关的数据结构。
- 使用一个迭代器来遍历或是操作数据结构内的元素。

# 第二部分：函数式编程（4-5章）
对应函数式编程来说，它只关心输入数据和输出数据相关的关系，数学表达式里面其实是在做一种映射（mapping），输入的数据和输出的数据关系是什么样的，是用函数来定义的。
## 特点
- stateless:函数不维护任何状态。
- immutable:输入数据是不能动的，动了输入数据就有危险，所以要返回新的数据集。
## 优势
- 没有状态就没有伤害
- 并行执行无伤害
- Copy-Paste重构代码无伤害
- 函数的执行没有顺序上的问题
- 惰性求值。表达式不在它被绑定到变量之后就立即求值，而是在该值被取用的时候求值。如x=expression，直到引用x而有了对x的值的需求的时候才求值。
- 确定性。同一个参数，在不同的场景下会计算出不同的结果。所谓的不同的场景，就是函数会根据运行中的状态信息的不同而发生变化。
## 劣势
- 数据复制比较严重  

对应纯函数式（也就是完全没有状态的函数）的编程来说，各个语言支持的程度如下： 
- 完全纯函数式：Haskell
- 容易写纯函数：F#, Ocaml, Clojure, Scala
- 纯函数需要花点精力：C#, Java, JavaScript

## 函数式编程用到的技术
- first class function(头等函数)：函数可以像变量一样使用，如创建、修改，并当成变量一样传递、返回、或是在函数中嵌套函数。
- tail recursion optimization(尾递归优化)：递归如果很深的话，stack受不了，并会导致性能大幅度下降。而尾递归在每次递归时都会重用stack，这样能够提升性能。当然，这需要语言或编译器的支持，Python就不支持。
- map&reduce
- pipeline(通道)：将函数实例成一个一个的action，然后将一组action放到一个数值或列表中，再把数据传给这个action list，数据就像一个pipeline一样顺序地被各个函数所操作，最终得到我们想要的结果。
- recursing(递归)：递归最大的好处就是简化代码，它可以把一个复杂的问题用很简单的代码描述出来。
- currying(柯里化)：将一个函数的多个参数分解为多个函数，然后将函数多层封装起来，每层函数都返回一个函数去接收下一个参数。这可以简化函数的多个参数。
- higher order function(高阶函数)：函数当参数，把传入的函数做一个封装，然后返回这个封装函数。

### 区别：
过程式编程范式：指令式编程  
函数式编程范式：声明式编程

[函数式编程](demo.py)
- 函数间没有共享的变量；
- 函数间通过参数和返回值来传递数据；
- 在函数里没有临时变量。

## 修饰器模式
- 表面上看，修饰器模式就是扩展限有的一个函数的功能，让它可以干一些其他的事，或是在现有的函数功能上再附加一些别的功能。
- 除了我们可以感受到的函数式编程下的扩展功能，我们还能感受到函数的互相和随意拼装带来的好处。
- 但是深入看一下，我们不难发现，Decorator这个函数其实是可以修饰几乎所有函数的。于是，这种可以通用于其它函数的编程方式，可以很容易地将一些非业务功能的、属于控制类型的代码给抽象出来（所谓的控制类型的代码就是像for-loop，或是打日志，或是函数路由，或是求函数运行时间之类非业务功能性的代码）。  

用某个@decorator来修饰某个函数func，如下列代码，解释器会解释成func=decorator(func)
```
@decorator
def func():
    pass
```
[修饰器](decorate.py)  
Python是动态语言，Java有语言虚拟机，Go是静态语言。

# 第三部分：面对对象编程（6-8章）
面向对象编程是一种具有对象概念程序编程范型，同时也是一种程序开发的抽象方针。它可能包含数据、属性、代码与方法。对象则指的是类的实例。它将对象作为程序的基本单元，将程序和数据封装其中，以提高软件的可重用性、灵活性和可扩展性，对象里的程序可以访问及修改对象相关联的数据。在面向对象编程里，计算机程序会被设计成彼此相关的对象。  
几乎所有主流语言都支持面向对象，比如Common Lisp、**Python**、C++、Objective-C、Smalltalk、Delphi、Java、Swift、C#、Perl、Ruby与PHP等。  

## 三大特性：  
1. 封装
2. 继承
3. 多态

## 两个面向对象的核心理念：
1. Program to an "interface", not an "implementation"  
使用者不需要知道数据类型、结构、算法的细节，不需要知道实现细节，只需要知道提供的接口。  
利于抽象、封装、动态绑定、多态。  
符合面向对象的特质和理念。
2. Favor "object composition" over "class inheritance"  
继承需要给子类暴露一些父类的设计和实现细节。  
父类实现的改变会造成子类也需要改变。  
我们以为继承主要是为了代码重用，但实际上在子类中需要重新实现很多父类的方法。  
继承更多的应该是为了多态。

## 优点
- 能和真实世界交相辉映，符号人的直觉
- 面对对象和数据库模型设计类型，更多地关注对象间的模型设计
- 强调于“名词”而不是“动词”，更多地关注对象和对象间的接口
- 根据业务的特征形成一个个高内聚的对象，有效地分离了抽象和具体实现，增强了可重用性和可扩展性
- 拥有大量非常优秀的的设计原则
- S.O.L.I.D(单一功能、开闭原则、里氏替换、接口隔离以及依赖反转，是面向对象设计的五个基本原则)、IoC/DIP

## 缺点
- 代码都需要附着在一个类上，从一个侧面上说，其鼓励了类型
- 代码需要通过对象来达到抽象的效果，导致了相当厚重的“代码粘合层”
- 因为太多的封装以及对状态的鼓励，导致了大量不透明并在并发下出现的很多问题。

## 基于原型（Prototype）的编程
基于原型（Prototype）的编程其实也是面向对象编程的一种方式。没有class化，直接使用对象。又叫基于实例的编程。其主流的语言是**JavaScript**
- 在基于类的语言中，一个新的实例通过类构造器和构造器可选的参数来构造，结果实例由类选定的行为和布局创建模型。基于类的面向对象系统只有动态语言运行类在运行时被修改（Common Lisp、Dylan、Objective-C、Perl、Python、Ruby和Smalltalk）
- 在基于原型的系统中构造对象有两种方法，通过复制已有的对象或者通过通过扩展空对象创建。很多基于原型的系统提倡运行时进行原型的修改。

# 第四部分：编程本质和逻辑编程（9-11章）